<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>德州扑克买入结算工具</title>
    <style>
        body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
        .bg-\[\#f5f7fb\] { background-color: #f5f7fb; }
        .min-h-screen { min-height: 100vh; }
        .space-y-6 > :not([hidden]) ~ :not([hidden]) { --tw-space-y-reverse: 0; margin-top: calc(1.5rem * calc(1 - var(--tw-space-y-reverse))); margin-bottom: calc(1.5rem * var(--tw-space-y-reverse)); }
        .p-4 { padding: 1rem; }
        .text-2xl { font-size: 1.5rem; line-height: 2rem; }
        .font-bold { font-weight: 700; }
        .bg-white { background-color: #ffffff; }
        .rounded-2xl { border-radius: 1rem; }
        .shadow { --tw-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06); box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow); }
        .grid { display: grid; }
        .gap-4 { gap: 1rem; }
        .md\:grid-cols-5 { grid-template-columns: repeat(5, minmax(0, 1fr)); }
        .flex { display: flex; }
        .items-center { align-items: center; }
        .gap-2 { gap: 0.5rem; }
        .text-sm { font-size: 0.875rem; line-height: 1.25rem; }
        .rounded-lg { border-radius: 0.5rem; }
        .border { border-width: 1px; }
        .px-3 { padding-left: 0.75rem; padding-right: 0.75rem; }
        .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
        .bg-sky-50 { background-color: #f0f9ff; }
        .focus\:outline-none:focus { outline: 2px solid transparent; outline-offset: 2px; }
        .focus\:ring:focus { --tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color); --tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(3px + var(--tw-ring-offset-width)) var(--tw-ring-color); box-shadow: var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000); }
        .focus\:ring-sky-200:focus { --tw-ring-color: #e0f2fe; }
        .bg-emerald-50 { background-color: #ecfdf5; }
        .focus\:ring-emerald-200:focus { --tw-ring-color: #a7f3d0; }
        .bg-purple-50 { background-color: #faf5ff; }
        .focus\:ring-purple-200:focus { --tw-ring-color: #e9d5ff; }
        .md\:col-span-2 { grid-column: span 2 / span 2; }
        .flex-1 { flex: 1 1 0%; }
        .bg-indigo-50 { background-color: #eef2ff; }
        .focus\:ring-indigo-200:focus { --tw-ring-color: #c7d2fe; }
        .rounded-2xl { border-radius: 1rem; }
        .px-4 { padding-left: 1rem; padding-right: 1rem; }
        .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
        .bg-indigo-600 { background-color: #4f46e5; }
        .hover\:bg-indigo-700:hover { background-color: #4338ca; }
        .text-white { color: #ffffff; }
        .shadow { --tw-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06); box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow); }
        .mt-2 { margin-top: 0.5rem; }
        .text-xs { font-size: 0.75rem; line-height: 1rem; }
        .text-gray-600 { color: #4b5563; }
        .inline-flex { display: inline-flex; }
        .gap-2 { gap: 0.5rem; }
        .overflow-x-auto { overflow-x: auto; }
        .min-w-full { min-width: 100%; }
        .text-sm { font-size: 0.875rem; line-height: 1.25rem; }
        .text-gray-600 { color: #4b5563; }
        .px-3 { padding-left: 0.75rem; padding-right: 0.75rem; }
        .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
        .text-left { text-align: left; }
        .border-t { border-top-width: 1px; }
        .align-top { vertical-align: top; }
        .font-medium { font-weight: 500; }
        .mt-1 { margin-top: 0.25rem; }
        .text-gray-500 { color: #6b7280; }
        .break-words { overflow-wrap: break-word; }
        .flex-wrap { flex-wrap: wrap; }
        .bg-cyan-600 { background-color: #0891b2; }
        .hover\:bg-cyan-700:hover { background-color: #0e7490; }
        .rounded-2xl { border-radius: 1rem; }
        .text-white { color: #ffffff; }
        .bg-blue-50 { background-color: #eff6ff; }
        .focus\:ring-blue-200:focus { --tw-ring-color: #bfdbfe; }
        .w-28 { width: 7rem; }
        .bg-yellow-50 { background-color: #fffbeb; }
        .focus\:ring-yellow-200:focus { --tw-ring-color: #fef08a; }
        .gap-1 { gap: 0.25rem; }
        .text-gray-700 { color: #374151; }
        .px-2 { padding-left: 0.5rem; padding-right: 0.5rem; }
        .py-1 { padding-top: 0.25rem; padding-bottom: 0.25rem; }
        .bg-emerald-50 { background-color: #ecfdf5; }
        .flex-col { flex-direction: column; }
        .items-start { align-items: flex-start; }
        .bg-purple-600 { background-color: #9333ea; }
        .hover\:bg-purple-700:hover { background-color: #7e22ce; }
        .bg-purple-100 { background-color: #f3e8ff; }
        .hover\:bg-purple-200:hover { background-color: #e9d5ff; }
        .leading-6 { line-height: 1.5rem; }
        .text-green-600 { color: #16a34a; }
        .text-red-600 { color: #dc2626; }
        .bg-rose-600 { background-color: #e11d48; }
        .hover\:bg-rose-700:hover { background-color: #be123c; }
        .bg-gray-300 { background-color: #d1d5db; }
        .cursor-not-allowed { cursor: not-allowed; }
        .space-y-1 > :not([hidden]) ~ :not([hidden]) { --tw-space-y-reverse: 0; margin-top: calc(0.25rem * calc(1 - var(--tw-space-y-reverse))); margin-bottom: calc(0.25rem * var(--tw-space-y-reverse)); }
        .text-amber-700 { color: #b45309; }
        .bg-amber-600 { background-color: #d97706; }
        .hover\:bg-amber-700:hover { background-color: #b45309; }
        .font-semibold { font-weight: 600; }
        .bg-orange-50 { background-color: #fff7ed; }
        .focus\:ring-orange-200:focus { --tw-ring-color: #fed7aa; }
        .no-spinner::-webkit-outer-spin-button, .no-spinner::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
        .no-spinner { -moz-appearance: textfield; }
    </style>
</head>
<body>

<div id="root"></div>

<script>
    const initialNames = ["Jim", "li yuelin", "Jack", "Ying qi", "Annmary", "Bo", "Sue", "he", "Emma", "Sun", "Alex", "Tony", "ke", "Dudu", "Jasonma"];
    const DiscountOptions = [{ key: "none", label: "不打折", factor: 1 }, { key: "half", label: "除2", factor: 0.5 }, { key: "third", label: "除3", factor: 1 / 3 }];
    const round5up = (v) => Math.ceil(v / 5) * 5;
    const currency = (n) => { const v = Number(n) || 0; return (Math.round(v * 100) / 100).toFixed(2); };
    const clampMinZero = (n) => Math.max(0, Number(n) || 0);

    function tierTaxByWin(win) {
      const w = Number(win) || 0;
      if (w < 50) return 0;
      if (w < 75) return 5;
      const blocks = Math.floor((w - 75) / 50);
      return 10 + 5 * blocks;
    }

    function computeAll(players, globalDiscountKey, starFee, memberFee, acceptedDiffRaw, preFeaturePayoutRaw) {
      const factor = (DiscountOptions.find((d) => d.key === globalDiscountKey) || { factor: 1 }).factor;
      const totalBuyRaw = players.reduce((a, p) => a + (p.buys || []).reduce((x, y) => x + y, 0), 0);
      const totalPayoutRaw = players.reduce((a, p) => a + (p.includePayout ? (Number(p.payoutStr) || 0) : 0), 0);
      const trialBalanceExtraRaw = Number(preFeaturePayoutRaw) || 0;
      const trialBalanceRaw = totalBuyRaw - totalPayoutRaw - trialBalanceExtraRaw;
      const trialBalanceVisible = trialBalanceRaw - (acceptedDiffRaw || 0);
      let totalDeltaDiscounted = 0;
      let totalDeltaRounded = 0;
      let totalRoundingOverflow = 0;
      let totalTaxPlayers = 0;
      const rows = players.map((p) => {
        const rawBuy = (p.buys || []).reduce((s, v) => s + v, 0);
        const star = p.stargazer ? Number(starFee) || 0 : 0;
        const payout = p.includePayout ? (Number(p.payoutStr) || 0) : 0;
        const discountedDelta = (payout - rawBuy - star) * factor;
        const lossForRelief = Math.max(0, -discountedDelta);
        const roundedDelta = round5up(discountedDelta);
        const roundingOverflow = roundedDelta - discountedDelta;
        const memberBase = (Number(p.memberCount || 0) || 0) * (Number(memberFee) || 0);
        let memberAfterRelief = memberBase;
        if ((p.memberCount || 0) >= 2) {
          if (lossForRelief >= 300) memberAfterRelief = memberBase * 0.5;
          else if (lossForRelief >= 200) memberAfterRelief = clampMinZero(memberBase - 10);
        }
        let net = roundedDelta - memberAfterRelief;
        let tax = tierTaxByWin(net);
        if ((p.memberCount || 0) >= 2) {
          if (tax >= 40) tax = clampMinZero(tax - 20);
          else if (tax >= 20) tax = clampMinZero(tax - 10);
        }
        totalDeltaDiscounted += discountedDelta;
        totalDeltaRounded += roundedDelta;
        totalRoundingOverflow += roundingOverflow;
        if (tax > 0) totalTaxPlayers += tax;
        return {
          id: p.id,
          name: p.name,
          buys: p.buys,
          payoutStr: p.payoutStr,
          includePayout: p.includePayout,
          stargazer: p.stargazer,
          memberCount: p.memberCount,
          rawBuy,
          star,
          discountedDelta,
          roundedDelta,
          roundingOverflow,
          memberBase,
          memberAfterRelief,
          lossForRelief,
          net,
          tax,
        };
      });
      return {
        factor,
        rows,
        totalBuyRaw,
        totalPayoutRaw,
        trialBalanceRaw,
        trialBalanceVisible,
        totalDeltaDiscounted,
        totalDeltaRounded,
        totalRoundingOverflow,
        totalTaxPlayers,
        trialBalanceExtraRaw,
      };
    }

    function App() {
      const [speakOn, setSpeakOn] = React.useState(true);
      const [speakRate, setSpeakRate] = React.useState(1.0);
      const speakLock = React.useRef(false);

      function speak(text) {
        try {
          if (!speakOn || typeof window === "undefined" || !window.speechSynthesis) return;
          if (speakLock.current) return;
          speakLock.current = true;
          const u = new SpeechSynthesisUtterance(text);
          u.rate = speakRate;
          u.lang = "zh-CN";
          u.onend = () => {
            speakLock.current = false;
          };
          window.speechSynthesis.speak(u);
        } catch {}
      }

      const [globalDiscountKey, setGlobalDiscountKey] = React.useState("none");
      const [starFee, setStarFee] = React.useState(20);
      const [memberFee, setMemberFee] = React.useState(20);
      const [starFeeDraft, setStarFeeDraft] = React.useState("20");
      const [memberFeeDraft, setMemberFeeDraft] = React.useState("20");
      const [payoutDraft, setPayoutDraft] = React.useState({});
      const [newPlayerNameDraft, setNewPlayerNameDraft] = React.useState("");
      const [acceptedDiffRaw, setAcceptedDiffRaw] = React.useState(0);
      const [acceptedTaxFromDiff, setAcceptedTaxFromDiff] = React.useState(0);
      const [preFeaturePayoutRaw, setPreFeaturePayoutRaw] = React.useState(0);
      const [players, setPlayers] = React.useState(() => initialNames.map((name, idx) => ({ id: `${idx + 1}`, name, buys: [], payoutStr: "", includePayout: false, stargazer: false, memberCount: 0 })));

      function addPlayer() {
        const name = newPlayerNameDraft.trim();
        if (!name) return;
        setPlayers((prev) => [...prev, {
          id: `${Date.now()}`,
          name,
          buys: [],
          payoutStr: "",
          includePayout: false,
          stargazer: false,
          memberCount: 0,
        }, ]);
        setNewPlayerNameDraft("");
      }

      function removePlayer(id) {
        setPlayers((prev) => prev.filter((p) => p.id !== id));
      }

      function updatePlayer(id, updater) {
        setPlayers((prev) => prev.map((p) => (p.id === id ? updater(p) : p)));
      }

      const computed = React.useMemo(() => computeAll(players, globalDiscountKey, starFee, memberFee, acceptedDiffRaw, preFeaturePayoutRaw), [players, globalDiscountKey, starFee, memberFee, acceptedDiffRaw, preFeaturePayoutRaw]);

      function acceptCurrentDifference() {
        const diffRaw = computed.trialBalanceRaw - acceptedDiffRaw;
        if (Math.abs(diffRaw) < 1e-9) return;
        const intoTax = diffRaw * (computed.factor || 1);
        setAcceptedDiffRaw((v) => v + diffRaw);
        setAcceptedTaxFromDiff((v) => v + intoTax);
        alert(`已接受差额：原始 ¥${currency(diffRaw)}，折后入税池 ¥${currency(intoTax)}`);
      }

      function Card({
        children
      }) {
        return React.createElement("div", {
          className: "bg-white rounded-2xl shadow p-4"
        }, children);
      }

      return React.createElement("div", {
        className: "min-h-screen p-4 space-y-6 bg-[#f5f7fb]"
      }, React.createElement("h1", {
        className: "text-2xl font-bold"
      }, "\u5FB7\u5DDE\u6251\u514B\u4E70\u5165\u7ED3\u7B97\u5DE5\u5177"), React.createElement(Card, null, React.createElement("div", {
        className: "grid gap-4 md:grid-cols-5"
      }, React.createElement("label", {
        className: "flex items-center gap-2"
      }, React.createElement("span", {
        className: "text-sm"
      }, "\u5168\u5C40\u6253\u6298"), React.createElement("select", {
        className: "rounded-lg border px-3 py-2 bg-sky-50 focus:outline-none focus:ring focus:ring-sky-200",
        value: globalDiscountKey,
        onChange: (e) => setGlobalDiscountKey(e.target.value)
      }, DiscountOptions.map((d) => React.createElement("option", {
        key: d.key,
        value: d.key
      }, d.label)))), React.createElement("label", {
        className: "flex items-center gap-2"
      }, React.createElement("span", {
        className: "text-sm"
      }, "\u89C2\u661F\u8D39\u7528"), React.createElement("input", {
        type: "text",
        className: "rounded-lg border px-3 py-2 bg-emerald-50 focus:outline-none focus:ring focus:ring-emerald-200",
        value: starFeeDraft,
        onChange: (e) => setStarFeeDraft(e.target.value),
        onBlur: () => setStarFee(Number(starFeeDraft) || 0)
      })), React.createElement("label", {
        className: "flex items-center gap-2"
      }, React.createElement("span", {
        className: "text-sm"
      }, "\u4F1A\u5458\u5355\u6B21"), React.createElement("input", {
        type: "text",
        className: "rounded-lg border px-3 py-2 bg-purple-50 focus:outline-none focus:ring focus:ring-purple-200",
        value: memberFeeDraft,
        onChange: (e) => setMemberFeeDraft(e.target.value),
        onBlur: () => setMemberFee(Number(memberFeeDraft) || 0)
      })), React.createElement("div", {
        className: "flex items-center gap-2 md:col-span-2"
      }, React.createElement("input", {
        placeholder: "\u65B0\u73A9\u5BB6\u540D\u5B57",
        className: "rounded-lg border px-3 py-2 flex-1 bg-indigo-50 focus:outline-none focus:ring focus:ring-indigo-200",
        value: newPlayerNameDraft,
        onChange: (e) => setNewPlayerNameDraft(e.target.value),
        onKeyDown: (e) => e.key === "Enter" && addPlayer()
      }), React.createElement("button", {
        className: "rounded-2xl px-4 py-2 text-white bg-indigo-600 hover:bg-indigo-700 shadow",
        onClick: addPlayer
      }, "\u6DFB\u52A0")), React.createElement("div", {
        className: "mt-2 text-xs text-gray-600 flex items-center gap-4"
      }, React.createElement("label", {
        className: "inline-flex items-center gap-2"
      }, React.createElement("input", {
        type: "checkbox",
        checked: speakOn,
        onChange: (e) => setSpeakOn(e.target.checked)
      }), React.createElement("span", null, "\u8BED\u97F3\u64AD\u62A5")), React.createElement("label", {
        className: "inline-flex items-center gap-2"
      }, React.createElement("span", null, "\u8BED\u901F"), React.createElement("input", {
        type: "range",
        min: 0.7,
        max: 1.3,
        step: 0.1,
        value: speakRate,
        onChange: (e) => setSpeakRate(Number(e.target.value))
      }), React.createElement("span", {
        className: "text-xs"
      }, speakRate.toFixed(1))))), React.createElement(Card, null, React.createElement("div", {
        className: "overflow-x-auto"
      }, React.createElement("table", {
        className: "min-w-full text-sm"
      }, React.createElement("thead", null, React.createElement("tr", {
        className: "text-gray-600"
      }, React.createElement("th", {
        className: "px-3 py-2 text-left"
      }, "\u73A9\u5BB6 / \u4E70\u5165\u8BB0\u5F55"), React.createElement("th", {
        className: "px-3 py-2 text-left"
      }, "\u4E70\u5165"), React.createElement("th", {
        className: "px-3 py-2 text-left"
      }, "\u5151\u4ED8"), React.createElement("th", {
        className: "px-3 py-2 text-left"
      }, "\u89C2\u661F"), React.createElement("th", {
        className: "px-3 py-2 text-left"
      }, "\u4F1A\u5458"), React.createElement("th", {
        className: "px-3 py-2 text-left"
      }, "\u51C0\u989D/\u6298\u540E/\u7A0E"), React.createElement("th", {
        className: "px-3 py-2 text-left"
      }, "\u64CD\u4F5C"))), React.createElement("tbody", null, players.map((p) => {
        const row = computed.rows.find((r) => r.id === p.id) || {
          id: p.id,
          name: p.name,
          buys: [],
          payoutStr: "",
          includePayout: false,
          stargazer: false,
          memberCount: 0,
          rawBuy: 0,
          star: 0,
          discountedDelta: 0,
          roundedDelta: 0,
          roundingOverflow: 0,
          memberBase: 0,
          memberAfterRelief: 0,
          lossForRelief: 0,
          net: 0,
          tax: 0,
        };
        const canDelete = (p.buys || []).length === 0;
        return React.createElement("tr", {
          key: p.id,
          className: "border-t align-top"
        }, React.createElement("td", {
          className: "px-3 py-3"
        }, React.createElement("div", {
          className: "font-medium"
        }, p.name), React.createElement("div", {
          className: "mt-1 text-xs text-gray-500 break-words"
        }, (p.buys || []).length ? `\u4E70\u5165\u8BB0\u5F55\uFF1A${p.buys.join(", ")}` : "\u6682\u65E0\u4E70\u5165\u8BB0\u5F55")), React.createElement("td", {
          className: "px-3 py-3"
        }, React.createElement("div", {
          className: "flex flex-wrap items-center gap-2"
        }, React.createElement("button", {
          className: "rounded-2xl px-3 py-2 text-white bg-cyan-600 hover:bg-cyan-700 shadow",
          onClick: () => {
            updatePlayer(p.id, (pp) => ({ ...pp,
              buys: [...pp.buys, 100]
            }));
            speak(`${p.name} \u4E70\u5165 100 \u5143`);
          }
        }, "+100"), React.createElement("select", {
          className: "rounded-lg border px-3 py-2 bg-blue-50 focus:outline-none focus:ring focus:ring-blue-200",
          defaultValue: "",
          onChange: (e) => {
            const v = Number(e.target.value || 0);
            if (v > 0) {
              updatePlayer(p.id, (pp) => ({ ...pp,
                buys: [...pp.buys, v]
              }));
              speak(`${p.name} \u4E70\u5165 ${v} \u5143`);
              e.target.value = "";
            }
          }
        }, React.createElement("option", {
          value: "",
          disabled: true
        }, "\u5FEB\u6377"), React.createElement("option", {
          value: "50"
        }, "+50"), React.createElement("option", {
          value: "200"
        }, "+200"), React.createElement("option", {
          value: "300"
        }, "+300")))), React.createElement("td", {
        className: "px-3 py-3"
      }, React.createElement("div", {
        className: "flex items-center gap-2"
      }, React.createElement("input", {
        className: "no-spinner rounded-lg border px-3 py-2 w-28 bg-yellow-50 focus:outline-none focus:ring focus:ring-yellow-200",
        type: "text",
        value: payoutDraft[p.id] ?? p.payoutStr,
        onChange: (e) => {
          const v = e.target.value;
          setPayoutDraft((d) => ({ ...d,
            [p.id]: v
          }));
        },
        onBlur: (e) => {
          const v = e.target.value;
          updatePlayer(p.id, (pp) => ({ ...pp,
            payoutStr: v
          }));
        }
      }), React.createElement("label", {
        className: "inline-flex items-center gap-1 text-xs text-gray-700"
      }, React.createElement("input", {
        type: "checkbox",
        checked: p.includePayout,
        onChange: (e) => {
          const checked = e.target.checked;
          updatePlayer(p.id, (pp) => ({ ...pp,
            includePayout: checked
          }));
          if (checked) speak(`${p.name} \u5151\u4ED8\u8BA1\u5165\u8BA1\u7B97`);
        }
      }), "\u8BA1\u5165"))), React.createElement("td", {
        className: "px-3 py-3"
      }, React.createElement("label", {
        className: "inline-flex items-center gap-2"
      }, React.createElement("input", {
        type: "checkbox",
        checked: p.stargazer,
        onChange: (e) => {
          const checked = e.target.checked;
          updatePlayer(p.id, (pp) => ({ ...pp,
            stargazer: checked
          }));
          if (checked) speak(`${p.name} \u9009\u62E9\u89C2\u661F\uFF0C\u8D39\u7528 \u00A5${currency(starFee)} \u5143`);
        }
      }), React.createElement("span", {
        className: "px-2 py-1 rounded bg-emerald-50"
      }, p.stargazer ? `\u00A5${currency(starFee)}` : "\u672A\u9009"))), React.createElement("td", {
        className: "px-3 py-3"
      }, React.createElement("div", {
        className: "flex flex-col items-start gap-1"
      }, React.createElement("div", {
        className: "flex items-center gap-2"
      }, React.createElement("button", {
        className: "rounded-2xl px-3 py-2 text-white bg-purple-600 hover:bg-purple-700 shadow",
        onClick: () => {
          updatePlayer(p.id, (pp) => ({ ...pp,
            memberCount: pp.memberCount + 1
          }));
          speak(`${p.name} \u589E\u52A0\u4E00\u6B21\u4F1A\u5458\uFF0C\u5F53\u524D ${p.memberCount + 1} \u6B21`);
        }
      }, "+ \u4F1A\u5458"), p.memberCount > 0 && React.createElement("button", {
        className: "rounded-2xl px-3 py-2 bg-purple-100 hover:bg-purple-200",
        onClick: () => updatePlayer(p.id, (pp) => ({ ...pp,
          memberCount: Math.max(0, pp.memberCount - 1)
        }))
      }, "-1")), React.createElement("div", {
        className: "text-xs text-gray-700"
      }, "\u6B21\u6570\uFF1A", p.memberCount, " \u91D1\u989D\uFF1A\u00A5", currency(row.memberAfterRelief || 0)))), React.createElement("td", {
        className: "px-3 py-3"
      }, React.createElement("div", {
        className: "text-sm leading-6"
      }, React.createElement("div", {
        className: row.net >= 0 ? "text-green-600" : "text-red-600"
      }, "\u51C0\u989D\uFF1A", row.net >= 0 ? "+" : "", "\u00A5", currency(row.net)), React.createElement("div", null, "\u6298\u540E\u51C0\u5DEE\uFF08\u53D6\u6574\uFF09\uFF1A\u00A5", currency(row.roundedDelta)), React.createElement("div", null, "\u7A0E\uFF1A\u00A5", currency(row.tax)))), React.createElement("td", {
        className: "px-3 py-3"
      }, React.createElement("button", {
        className: (canDelete ? "bg-rose-600 hover:bg-rose-700" : "bg-gray-300 cursor-not-allowed") + " rounded-2xl px-3 py-2 text-white shadow",
        disabled: !canDelete,
        onClick: () => canDelete && removePlayer(p.id)
      }, "\u5220\u9664"))));
    })), React.createElement("div", {
        className: "grid md:grid-cols-3 gap-4"
      }, React.createElement(Card, null, React.createElement("div", {
        className: "space-y-1"
      }, React.createElement("div", null, "\u6298\u524D\u603B\u4E70\u5165\uFF1A\u00A5", currency(computed.totalBuyRaw)), React.createElement("div", null, "\u6298\u524D\u603B\u5151\u4ED8\uFF1A\u00A5", currency(computed.totalPayoutRaw)), React.createElement("div", {
        className: "text-sm"
      }, "\u6298\u524D\u529F\u80FD\u8D2D\u4E70\u5151\u4ED8\uFF1A\u00A5", currency(preFeaturePayoutRaw)), React.createElement("div", {
        className: "text-sm"
      }, "\u6298\u540E\u51C0\u5DEE\uFF08\u672A\u53D6\u6574\uFF09\u603B\u8BA1\uFF1A\u00A5", currency(computed.totalDeltaDiscounted)), React.createElement("div", {
        className: "text-sm"
      }, "\u6298\u540E\u51C0\u5DEE\uFF08\u53D6\u6574\uFF09\u603B\u8BA1\uFF1A\u00A5", currency(computed.totalDeltaRounded)), React.createElement("div", {
        className: "text-sm text-amber-700"
      }, "\u53D6\u6574\u6EA2\u51FA\u5408\u8BA1\uFF1A\u00A5", currency(computed.totalRoundingOverflow), "\uFF08\u5DF2\u8BA1\u5165\u7A0E\u6C60\uFF09"), React.createElement("div", {
        className: "text-sm"
      }, "\u8BD5\u7B97\u5E73\u8861\uFF08\u6298\u524D\u4E70\u5165 - \u6298\u524D\u5151\u4ED8 - \u6298\u524D\u529F\u80FD\u8D2D\u4E70\u5151\u4ED8\uFF09\uFF1A\u00A5", currency(computed.trialBalanceVisible)), React.createElement("div", {
        className: "text-xs text-gray-500"
      }, "\u5DF2\u63A5\u53D7\u5DEE\u989D\u7D2F\u8BA1\uFF08\u539F\u59CB\uFF09\uFF1A\u00A5", currency(acceptedDiffRaw)))), React.createElement(Card, null, React.createElement("div", {
        className: "space-y-2"
      }, React.createElement("button", {
        className: (Math.abs(computed.trialBalanceVisible) < 1e-9 ? "bg-gray-300 cursor-not-allowed" : "bg-amber-600 hover:bg-amber-700") + " rounded-2xl px-4 py-2 text-white shadow",
        disabled: Math.abs(computed.trialBalanceVisible) < 1e-9,
        onClick: acceptCurrentDifference
      }, "\u63A5\u53D7\u5DEE\u989D\uFF08\u5E76\u5165\u7A0E\u6C60\uFF09"), React.createElement("div", {
        className: "text-sm text-gray-700"
      }, "\u5E76\u5165\u91D1\u989D = \u5DEE\u989D \xD7 \u5F53\u524D\u6298\u6263\u7CFB\u6570\uFF08\u4E0D\u53D6\u7EDD\u5BF9\u503C\uFF09\u3002"))), React.createElement(Card, null, React.createElement("div", {
        className: "space-y-1"
      }, React.createElement("div", null, "\u73A9\u5BB6\u5E94\u7A0E\u5408\u8BA1\uFF1A\u00A5", currency(computed.totalTaxPlayers)), React.createElement("div", null, "\u53D6\u6574\u6EA2\u51FA\u5165\u7A0E\uFF1A\u00A5", currency(computed.totalRoundingOverflow)), React.createElement("div", null, "\u63A5\u53D7\u5DEE\u989D\u5165\u7A0E\uFF1A\u00A5", currency(acceptedTaxFromDiff)), React.createElement("div", {
        className: "font-semibold"
      }, "\u7A0E\u6C60\u603B\u8BA1\uFF1A\u00A5", currency(computed.totalTaxPlayers + computed.totalRoundingOverflow + acceptedTaxFromDiff))))), React.createElement("div", {
        className: "grid md:grid-cols-3 gap-4"
      }, React.createElement(Card, null, React.createElement("div", {
        className: "space-y-2"
      }, React.createElement("div", {
        className: "text-sm font-medium"
      }, "\u6298\u524D\u529F\u80FD\u8D2D\u4E70\u5151\u4ED8"), React.createElement("div", {
        className: "flex items-center gap-2"
      }, React.createElement("select", {
        className: "rounded-lg border px-3 py-2 bg-orange-50 focus:outline-none focus:ring focus:ring-orange-200",
        defaultValue: "",
        onChange: (e) => {
          const v = Number(e.target.value || 0);
          if (v > 0) {
            setPreFeaturePayoutRaw((x) => x + v);
            if (speakOn) speak(`\u529F\u80FD\u8D2D\u4E70\u5151\u4ED8 \u589E\u52A0 ${v} \u5143`);
            e.target.value = "";
          }
        }
      }, React.createElement("option", {
        value: "",
        disabled: true
      }, "\u9009\u62E9\u91D1\u989D"), React.createElement("option", {
        value: "10"
      }, "+10"), React.createElement("option", {
        value: "20"
      }, "+20")), React.createElement("div", {
        className: "text-sm"
      }, "\u5F53\u524D\u5408\u8BA1\uFF1A\u00A5", currency(preFeaturePayoutRaw))), React.createElement("div", {
        className: "text-xs text-gray-500"
      }, "\u8BA1\u5165\u8BD5\u7B97\u5E73\u8861\u516C\u5F0F\uFF1A\u6298\u524D\u4E70\u5165 \u2212 \u6298\u524D\u5151\u4ED8 \u2212 \u6298\u524D\u529F\u80FD\u8D2D\u4E70\u5151\u4ED8\u3002")))), React.createElement("style", null, " input.no-spinner::-webkit-outer-spin-button, input.no-spinner::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; } input.no-spinner { -moz-appearance: textfield; } "));
    }

    const rootElement = document.getElementById("root");
    const root = ReactDOM.createRoot(rootElement);
    root.render(React.createElement(App, null));
</script>
<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
</body>
</html>
